<!doctype html>
<html lang="uz">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>TEMUR STYLE DUKONI</title>
  <style>
    :root {
      --bg: #000;
      --text: #f9f9f9;
      --muted: #aaaaaa;
      --accent-yellow: #ffcc00;
      --accent-blue: #2196f3;
      font-family: Arial, Helvetica, sans-serif;
    }
    *{box-sizing:border-box;}
    body{margin:0;background:var(--bg);color:var(--text);}
    header{display:flex;justify-content:space-between;align-items:center;padding:10px 14px;border-bottom:1px solid #222;}
    .brand{font-weight:700;font-size:18px;color:var(--accent-yellow);}
    button{cursor:pointer;border:none;border-radius:6px;padding:8px 12px;font-size:14px;}
    .btn-yellow{background:var(--accent-yellow);color:#000;font-weight:600;}
    .btn-blue{background:var(--accent-blue);color:#fff;}
    main{padding:14px;max-width:1000px;margin:0 auto;}
    input[type="text"]{width:100%;padding:8px;border:1px solid #333;border-radius:6px;background:#111;color:var(--text);}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:14px;margin-top:16px;}
    .card{background:#111;border:1px solid #222;border-radius:8px;padding:10px;display:flex;flex-direction:column;}
    .card img{width:100%;height:150px;object-fit:cover;border-radius:6px;}
    .title{font-weight:600;margin-top:8px;}
    .price{color:var(--accent-yellow);font-weight:700;margin-top:4px;}
    .muted{color:var(--muted);font-size:13px;}
    footer{text-align:center;color:var(--muted);padding:14px 8px;font-size:12px;margin-top:20px;border-top:1px solid #111;}
    #cartPanel{position:fixed;right:10px;top:10px;width:320px;max-width:90vw;background:#111;border:1px solid #333;padding:12px;border-radius:8px;box-shadow:0 0 20px rgba(255,255,255,0.05);display:none;z-index:50;}
    .cart-item{display:flex;gap:8px;align-items:center;border-bottom:1px dashed #333;padding:6px 0;}
    .cart-item img{width:60px;height:60px;border-radius:6px;object-fit:cover;}
    @media(max-width:600px){
      .grid{grid-template-columns:repeat(auto-fit,minmax(140px,1fr));}
      .card img{height:120px;}
    }
  </style>
</head>
<body>
  <header>
    <div class="brand">TEMUR STYLE DUKONI</div>
    <div style="display:flex;gap:8px;align-items:center;">
      <button class="btn-blue" id="langBtn">–†—É—Å</button>
      <button class="btn-yellow" id="cartBtn">üõí <span id="cartCount">0</span></button>
    </div>
  </header>

  <main>
    <input type="text" id="searchInput" placeholder="Mahsulot qidiring...">
    <div class="grid" id="productGrid"></div>
  </main>

  <div id="cartPanel">
    <div style="display:flex;justify-content:space-between;align-items:center;">
      <div style="font-weight:700;">Savat</div>
      <button class="btn-blue" onclick="closeCart()">‚úñ</button>
    </div>
    <div id="cartItems" style="max-height:300px;overflow:auto;margin-top:8px;"></div>
    <div style="margin-top:8px;display:flex;justify-content:space-between;">
      <div>Jami: <span id="cartTotal">0</span> so'm</div>
      <button class="btn-yellow" onclick="checkout()">Buyurtma</button>
    </div>
  </div>

  <footer>¬© <span id="year"></span> TEMUR STYLE DUKONI</footer>

  <script>
    const LANGS = { uz: {cart:"Savat",add:"Savatga qo‚Äòshish",buy:"Buyurtma yuborildi!"},
                    ru: {cart:"–ö–æ—Ä–∑–∏–Ω–∞",add:"–í –∫–æ—Ä–∑–∏–Ω—É",buy:"–ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!"} };
    let LANG='uz';

    function $(x){return document.querySelector(x)}
    function money(n){return Number(n).toLocaleString('uz-UZ')}
    const CART_KEY='temur_cart';
    const PRODUCTS_KEY='temur_products';
    function loadCart(){return JSON.parse(localStorage.getItem(CART_KEY)||'{}')}
    function saveCart(c){localStorage.setItem(CART_KEY,JSON.stringify(c))}
    function loadProducts(){return JSON.parse(localStorage.getItem(PRODUCTS_KEY)||'[]')}
    function saveProducts(p){localStorage.setItem(PRODUCTS_KEY,JSON.stringify(p))}

    function updateCartCount(){
      const c=loadCart();
      $('#cartCount').textContent=Object.values(c).reduce((s,i)=>s+i.qty,0);
    }

    function renderProducts(list=loadProducts()){
      const grid=$('#productGrid'); grid.innerHTML='';
      list.forEach(p=>{
        const div=document.createElement('div');
        div.className='card';
        div.innerHTML=`
          <img src="${p.img}" alt="">
          <div class="title">${p.name}</div>
          <div class="price">${money(p.price)} so'm</div>
          <button class="btn-yellow" style="margin-top:8px;" onclick="addToCart('${p.id}')">${LANGS[LANG].add}</button>
        `;
        grid.appendChild(div);
      });
    }

    function addToCart(id){
      const c=loadCart(); if(!c[id]) c[id]={id,qty:0};
      c[id].qty++; saveCart(c); updateCartCount(); openCart();
    }

    function openCart(){
      $('#cartPanel').style.display='block';
      const c=loadCart(), items=$('#cartItems'); items.innerHTML='';
      let total=0; const products=loadProducts();
      Object.values(c).forEach(it=>{
        const p=products.find(x=>x.id==it.id); if(!p)return;
        total+=p.price*it.qty;
        const div=document.createElement('div');div.className='cart-item';
        div.innerHTML=`
          <img src="${p.img}">
          <div style="flex:1">${p.name}<br><span class="muted">${money(p.price)} so'm</span></div>
          <div><button class="btn-blue" onclick="chgQty('${p.id}',-1)">-</button>
          ${it.qty}
          <button class="btn-blue" onclick="chgQty('${p.id}',1)">+</button></div>`;
        items.appendChild(div);
      });
      $('#cartTotal').textContent=money(total);
    }

    function chgQty(id,d){
      const c=loadCart(); if(!c[id]) return;
      c[id].qty+=d; if(c[id].qty<=0) delete c[id];
      saveCart(c); openCart(); updateCartCount();
    }

    function closeCart(){$('#cartPanel').style.display='none';}
    function checkout(){
      alert(LANGS[LANG].buy);
      const orders=JSON.parse(localStorage.getItem('temur_orders')||'[]');
      orders.push({time:new Date().toLocaleString(),items:loadCart()});
      localStorage.setItem('temur_orders',JSON.stringify(orders));
      localStorage.removeItem(CART_KEY); updateCartCount(); closeCart();
    }

    $('#langBtn').onclick=()=>{
      LANG = LANG==='uz'?'ru':'uz';
      $('#langBtn').textContent=LANG==='uz'?'–†—É—Å':'UZ';
      renderProducts();
    }

    $('#cartBtn').onclick=openCart;
    $('#year').textContent=new Date().getFullYear();
    renderProducts(); updateCartCount();
  </script>
</body>
</html>